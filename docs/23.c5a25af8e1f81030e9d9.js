(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{HfAe:function(t,e,s){"use strict";s.r(e),s.d(e,"PostListPageModule",function(){return R});var i=s("ofXK"),o=s("tyNb"),n=s("PcbD"),r=s("B8ql"),a=s("nYR2"),c=s("UM8G"),p=s("AytR"),l=s("fXoL"),g=s("Lpyx"),h=s("ShDn"),b=s("/Ft3"),u=s("Iw+v"),d=s("y3nj"),_=s("Yud9");function f(t,e){1&t&&l.Hb(0,"app-post-list-item",7),2&t&&l.cc("post",e.$implicit)}function y(t,e){1&t&&(l.Kb(0),l.Mb(1,"div",8),l.Mb(2,"div",9),l.qc(3," \ud45c\uc2dc\ud560 \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. "),l.Lb(),l.Lb(),l.Jb())}function m(t,e){1&t&&l.Hb(0,"app-loading-spot",10),2&t&&l.cc("size",50)}const{categories:v}=p.a,P=[{path:"",pathMatch:"full",redirectTo:"all"},{path:":category",component:(()=>{class t extends r.a{constructor(t,e,s,i,o,n){super(t),this.elementRef=t,this.router=e,this.toastService=s,this.postApiService=i,this.activatedRoute=o,this.subscriptionService=n,this.posts=[],this.loading=!1,this._canSearch=!1}ngOnInit(){this._subscribeScrollEnd(),this._subscribeRouteParams()}get empty(){return 0===this.posts.length&&!this.loading}_resetResult(){this._response=void 0,this.posts=[]}_subscribeRouteParams(){const t=this.activatedRoute.paramMap.subscribe(t=>{const e=t.get("category")||"";this._setCategory(e),this._canSearch?(this._resetResult(),this._getPostByCategory()):this.router.navigate(["/post/list/all"])});this.subscriptionService.store("_subscribeRouteParams",t)}_setCategory(t){"all"===t?(this._category=void 0,this._canSearch=!0):v.find(e=>e.value===t)?(this._category=t,this._canSearch=!0):this._canSearch=!1}_getPostByCategory(t){const e=this.postApiService.getPosts({category:this._category,status:"live",pageToken:t}).pipe(Object(a.a)(()=>this.loading=!1)).subscribe({next:e=>{this._response=e,t?this.posts.push(...e.items):this.posts=e.items||[]},error:t=>{this.toastService.open({message:"\ud3ec\uc2a4\ud2b8 \ubaa9\ub85d\uc744 \uac00\uc838\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:c.b.error})}});this.subscriptionService.store("_getPostByCategory",e),this.loading=!0}_subscribeScrollEnd(){const t=this.scrollEnd.subscribe(()=>{this._getNextPage()});this.subscriptionService.store("_subscribeScrollEnd",t)}_getNextPage(){var t;!this.loading&&(null===(t=this._response)||void 0===t?void 0:t.nextPageToken)&&this._getPostByCategory(this._response.nextPageToken)}}return t.\u0275fac=function(e){return new(e||t)(l.Gb(l.l),l.Gb(o.p),l.Gb(c.a),l.Gb(g.a),l.Gb(o.a),l.Gb(n.a))},t.\u0275cmp=l.Ab({type:t,selectors:[["app-post-list-page"]],features:[l.vb([n.a]),l.tb],decls:9,vars:4,consts:[[1,"scripter-top-bar"],[1,"scripter-page-container"],[3,"scrollContainer"],[1,"scripter-post-list-container"],["baseUrl","/post/view",3,"post",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"size",4,"ngIf"],["baseUrl","/post/view",3,"post"],[1,"scripter-empty-container"],[1,"scripter-empty-text"],[3,"size"]],template:function(t,e){1&t&&(l.Hb(0,"div",0),l.Mb(1,"div",1),l.Hb(2,"app-header",2),l.Hb(3,"app-post-list-header"),l.Mb(4,"div",3),l.oc(5,f,1,1,"app-post-list-item",4),l.oc(6,y,4,0,"ng-container",5),l.oc(7,m,1,1,"app-loading-spot",6),l.Lb(),l.Lb(),l.Hb(8,"app-footer")),2&t&&(l.wb(2),l.cc("scrollContainer",e.elementRef),l.wb(3),l.cc("ngForOf",e.posts),l.wb(1),l.cc("ngIf",e.empty),l.wb(1),l.cc("ngIf",e.loading))},directives:[h.a,b.a,i.j,i.k,u.a,d.a,_.a],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;align-items:stretch;flex-direction:column;flex-wrap:nowrap;position:absolute;overflow:auto}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}[_nghost-%COMP%]   .scripter-page-container[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:1;flex-basis:0}.scripter-post-list-container[_ngcontent-%COMP%], app-post-list-header[_ngcontent-%COMP%]{margin-top:50px}app-post-list-item[_ngcontent-%COMP%] + app-post-list-item[_ngcontent-%COMP%]{margin-top:55px}app-loading-spot[_ngcontent-%COMP%]{height:100px}app-footer[_ngcontent-%COMP%]{margin-top:200px}.scripter-empty-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;height:100px}.scripter-empty-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.scripter-empty-text[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#bebebe}"]}),t})()}];let x=(()=>{class t{}return t.\u0275mod=l.Eb({type:t}),t.\u0275inj=l.Db({factory:function(e){return new(e||t)},imports:[[o.s.forChild(P)],o.s]}),t})();var C=s("YwCB"),w=s("eX/7"),M=s("B6jC"),O=s("24OP"),S=s("DcXL");let R=(()=>{class t{}return t.\u0275mod=l.Eb({type:t}),t.\u0275inj=l.Db({factory:function(e){return new(e||t)},imports:[[i.c,x,C.a,w.a,M.a,O.a,S.a]]}),t})()}}]);