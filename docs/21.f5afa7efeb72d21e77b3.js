(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{HfAe:function(t,e,s){"use strict";s.r(e),s.d(e,"PostListPageModule",function(){return L});var o=s("ofXK"),i=s("tyNb"),n=s("PcbD"),r=s("B8ql"),a=s("nYR2"),c=s("UM8G"),p=s("fXoL"),l=s("Lpyx"),g=s("ShDn"),b=s("/Ft3"),h=s("Iw+v"),u=s("y3nj"),d=s("Yud9");function f(t,e){1&t&&p.Hb(0,"app-post-list-item",7),2&t&&p.cc("post",e.$implicit)}function _(t,e){1&t&&(p.Kb(0),p.Mb(1,"div",8),p.Mb(2,"div",9),p.qc(3," \ud45c\uc2dc\ud560 \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. "),p.Lb(),p.Lb(),p.Jb())}function y(t,e){1&t&&p.Hb(0,"app-loading-spot",10),2&t&&p.cc("size",50)}let m=(()=>{class t extends r.a{constructor(t,e,s,o,i){super(t),this.elementRef=t,this.toastService=e,this.postApiService=s,this.activatedRoute=o,this.subscriptionService=i,this.posts=[],this.loading=!1}ngOnInit(){this._subscribeScrollEnd(),this._subscribeRouteParams()}get empty(){return 0===this.posts.length&&!this.loading}_resetResult(){this._response=void 0,this.posts=[]}_subscribeRouteParams(){const t=this.activatedRoute.paramMap.subscribe(t=>{this._category=t.get("category")||void 0,this._resetResult(),this._getPostByCategory()});this.subscriptionService.store("_subscribeRouteParams",t)}_getPostByCategory(t){if(this._category){const e=this.postApiService.getPosts({category:this._category,status:"live",pageToken:t}).pipe(Object(a.a)(()=>this.loading=!1)).subscribe({next:e=>{this._response=e,t?this.posts.push(...e.items):this.posts=e.items||[]},error:t=>{this.toastService.open({message:"\ud3ec\uc2a4\ud2b8 \ubaa9\ub85d\uc744 \uac00\uc838\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:c.b.error})}});this.subscriptionService.store("_getPostByCategory",e),this.loading=!0}}_subscribeScrollEnd(){const t=this.scrollEnd.subscribe(()=>{this._getNextPage()});this.subscriptionService.store("_subscribeScrollEnd",t)}_getNextPage(){var t;!this.loading&&(null===(t=this._response)||void 0===t?void 0:t.nextPageToken)&&this._getPostByCategory(this._response.nextPageToken)}}return t.\u0275fac=function(e){return new(e||t)(p.Gb(p.l),p.Gb(c.a),p.Gb(l.a),p.Gb(i.a),p.Gb(n.a))},t.\u0275cmp=p.Ab({type:t,selectors:[["app-post-list-page"]],features:[p.vb([n.a]),p.tb],decls:9,vars:4,consts:[[1,"scripter-top-bar"],[1,"scripter-page-container"],[3,"scrollContainer"],[1,"scripter-post-list-container"],["baseUrl","/post/view",3,"post",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"size",4,"ngIf"],["baseUrl","/post/view",3,"post"],[1,"scripter-empty-container"],[1,"scripter-empty-text"],[3,"size"]],template:function(t,e){1&t&&(p.Hb(0,"div",0),p.Mb(1,"div",1),p.Hb(2,"app-header",2),p.Hb(3,"app-post-list-header"),p.Mb(4,"div",3),p.oc(5,f,1,1,"app-post-list-item",4),p.oc(6,_,4,0,"ng-container",5),p.oc(7,y,1,1,"app-loading-spot",6),p.Lb(),p.Lb(),p.Hb(8,"app-footer")),2&t&&(p.wb(2),p.cc("scrollContainer",e.elementRef),p.wb(3),p.cc("ngForOf",e.posts),p.wb(1),p.cc("ngIf",e.empty),p.wb(1),p.cc("ngIf",e.loading))},directives:[g.a,b.a,o.j,o.k,h.a,u.a,d.a],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;align-items:stretch;flex-direction:column;flex-wrap:nowrap;position:absolute;overflow:auto}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}[_nghost-%COMP%]   .scripter-page-container[_ngcontent-%COMP%]{flex-grow:1;flex-shrink:1;flex-basis:0}.scripter-post-list-container[_ngcontent-%COMP%], app-post-list-header[_ngcontent-%COMP%]{margin-top:50px}app-post-list-item[_ngcontent-%COMP%] + app-post-list-item[_ngcontent-%COMP%]{margin-top:55px}app-loading-spot[_ngcontent-%COMP%]{height:100px}app-footer[_ngcontent-%COMP%]{margin-top:200px}.scripter-empty-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;height:100px}.scripter-empty-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.scripter-empty-text[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#bebebe}"]}),t})();var v=s("AytR");const{categories:P}=v.a,x=[{path:"",pathMatch:"full",redirectTo:P[0].value},{path:":category",component:m}];let w=(()=>{class t{}return t.\u0275mod=p.Eb({type:t}),t.\u0275inj=p.Db({factory:function(e){return new(e||t)},imports:[[i.s.forChild(x)],i.s]}),t})();var C=s("YwCB"),M=s("eX/7"),O=s("B6jC"),S=s("24OP"),R=s("DcXL");let L=(()=>{class t{}return t.\u0275mod=p.Eb({type:t}),t.\u0275inj=p.Db({factory:function(e){return new(e||t)},imports:[[o.c,w,C.a,M.a,O.a,S.a,R.a]]}),t})()}}]);